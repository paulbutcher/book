<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js light">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Package Manager - Programming Flix</title>
        <!-- Custom HTML head -->
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        <link rel="icon" href="favicon.svg">
        <link rel="shortcut icon" href="favicon.png">
        <link rel="stylesheet" href="css/variables.css">
        <link rel="stylesheet" href="css/general.css">
        <link rel="stylesheet" href="css/chrome.css">
        <link rel="stylesheet" href="css/print.css" media="print">
        <!-- Fonts -->
        <link rel="stylesheet" href="FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="fonts/fonts.css">
        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="highlight.css">
        <link rel="stylesheet" href="tomorrow-night.css">
        <link rel="stylesheet" href="ayu-highlight.css">

        <!-- Custom theme stylesheets -->
    </head>
    <body>
        <!-- Provide site root to javascript -->
        <script type="text/javascript">
            var path_to_root = "";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script type="text/javascript">
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script type="text/javascript">
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script type="text/javascript">
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded "><a href="introduction.html"><strong aria-hidden="true">1.</strong> Introduction to Flix</a></li><li class="chapter-item expanded "><a href="getting-started.html"><strong aria-hidden="true">2.</strong> Getting Started</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="installing.html"><strong aria-hidden="true">2.1.</strong> Installing Flix</a></li><li class="chapter-item expanded "><a href="editor-support.html"><strong aria-hidden="true">2.2.</strong> Editor Support</a></li></ol></li><li class="chapter-item expanded "><a href="projects.html"><strong aria-hidden="true">3.</strong> Projects</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="building.html"><strong aria-hidden="true">3.1.</strong> Building</a></li><li class="chapter-item expanded "><a href="dependencies.html"><strong aria-hidden="true">3.2.</strong> Dependencies</a></li><li class="chapter-item expanded "><a href="project-reference.html"><strong aria-hidden="true">3.3.</strong> Reference</a></li></ol></li><li class="chapter-item expanded "><a href="data-types.html"><strong aria-hidden="true">4.</strong> Data Types</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="primitive-types.html"><strong aria-hidden="true">4.1.</strong> Primitives</a></li><li class="chapter-item expanded "><a href="tuples.html"><strong aria-hidden="true">4.2.</strong> Tuples</a></li><li class="chapter-item expanded "><a href="enums.html"><strong aria-hidden="true">4.3.</strong> Enums</a></li><li class="chapter-item expanded "><a href="type-aliases.html"><strong aria-hidden="true">4.4.</strong> Type Aliases</a></li></ol></li><li class="chapter-item expanded "><a href="functions.html"><strong aria-hidden="true">5.</strong> Functions</a></li><li class="chapter-item expanded "><a href="immutable-data.html"><strong aria-hidden="true">6.</strong> Immutable Data</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="lists.html"><strong aria-hidden="true">6.1.</strong> Lists</a></li><li class="chapter-item expanded "><a href="records.html"><strong aria-hidden="true">6.2.</strong> Records</a></li></ol></li><li class="chapter-item expanded "><a href="mutable-data.html"><strong aria-hidden="true">7.</strong> Mutable Data</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="references.html"><strong aria-hidden="true">7.1.</strong> References</a></li><li class="chapter-item expanded "><a href="arrays.html"><strong aria-hidden="true">7.2.</strong> Arrays</a></li></ol></li><li class="chapter-item expanded "><a href="control-structures.html"><strong aria-hidden="true">8.</strong> Control Structures</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="if-then-else.html"><strong aria-hidden="true">8.1.</strong> If-Then-Else</a></li><li class="chapter-item expanded "><a href="pattern-matching.html"><strong aria-hidden="true">8.2.</strong> Pattern Matching</a></li><li class="chapter-item expanded "><a href="foreach-foryield.html"><strong aria-hidden="true">8.3.</strong> For-Each and For-Yield</a></li></ol></li><li class="chapter-item expanded "><a href="concurrency.html"><strong aria-hidden="true">9.</strong> Concurrency</a></li><li class="chapter-item expanded "><a href="parallelism.html"><strong aria-hidden="true">10.</strong> Parallelism</a></li><li class="chapter-item expanded "><a href="effects.html"><strong aria-hidden="true">11.</strong> Effect System</a></li><li class="chapter-item expanded "><a href="laziness.html"><strong aria-hidden="true">12.</strong> Laziness</a></li><li class="chapter-item expanded "><a href="fixpoints.html"><strong aria-hidden="true">13.</strong> Fixpoints with Datalog</a></li><li class="chapter-item expanded "><a href="type-classes.html"><strong aria-hidden="true">14.</strong> Type Classes</a></li><li class="chapter-item expanded "><a href="namespaces.html"><strong aria-hidden="true">15.</strong> Namespaces</a></li><li class="chapter-item expanded "><a href="interoperability.html"><strong aria-hidden="true">16.</strong> Interoperability</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="creating-objects.html"><strong aria-hidden="true">16.1.</strong> Creating Objects</a></li><li class="chapter-item expanded "><a href="calling-methods.html"><strong aria-hidden="true">16.2.</strong> Calling Methods</a></li><li class="chapter-item expanded "><a href="reading-and-writing-fields.html"><strong aria-hidden="true">16.3.</strong> Reading and Writing Fields</a></li><li class="chapter-item expanded "><a href="extending-classes-and-interfaces.html"><strong aria-hidden="true">16.4.</strong> Classes and Interfaces</a></li><li class="chapter-item expanded "><a href="nested-and-inner-classes.html"><strong aria-hidden="true">16.5.</strong> Nested and Inner classes</a></li></ol></li><li class="chapter-item expanded "><a href="everyday-programming.html"><strong aria-hidden="true">17.</strong> Everyday Programming</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="main.html"><strong aria-hidden="true">17.1.</strong> The Main Function</a></li><li class="chapter-item expanded "><a href="printing-to-stdout.html"><strong aria-hidden="true">17.2.</strong> Printing to Standard Out</a></li><li class="chapter-item expanded "><a href="string-interpolation.html"><strong aria-hidden="true">17.3.</strong> String Interpolation</a></li><li class="chapter-item expanded "><a href="holes.html"><strong aria-hidden="true">17.4.</strong> Anonymous and Named Holes</a></li><li class="chapter-item expanded "><a href="type-ascriptions.html"><strong aria-hidden="true">17.5.</strong> Type Ascriptions</a></li><li class="chapter-item expanded "><a href="redundancy.html"><strong aria-hidden="true">17.6.</strong> Redundancy</a></li><li class="chapter-item expanded "><a href="debugging.html"><strong aria-hidden="true">17.7.</strong> Debugging</a></li></ol></li><li class="chapter-item expanded "><a href="tools.html"><strong aria-hidden="true">18.</strong> Tools</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="vscode.html"><strong aria-hidden="true">18.1.</strong> Visual Studio Code</a></li><li class="chapter-item expanded "><a href="build-and-packages.html" class="active"><strong aria-hidden="true">18.2.</strong> Package Manager</a></li><li class="chapter-item expanded "><a href="test-framework.html"><strong aria-hidden="true">18.3.</strong> Test Framework</a></li><li class="spacer"></li></ol></li><li class="chapter-item expanded "><a href="advanced-features.html"><strong aria-hidden="true">19.</strong> Advanced Features</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="upcast.html"><strong aria-hidden="true">19.1.</strong> Upcasts</a></li><li class="chapter-item expanded "><a href="casts.html"><strong aria-hidden="true">19.2.</strong> Type and Effect Casts</a></li><li class="chapter-item expanded "><a href="bug-and-unreachable.html"><strong aria-hidden="true">19.3.</strong> Bugs and Unreachable Code</a></li><li class="chapter-item expanded "><a href="purity-reflection.html"><strong aria-hidden="true">19.4.</strong> Purity Reflection</a></li><li class="spacer"></li></ol></li><li class="chapter-item expanded "><a href="appendix.html"><strong aria-hidden="true">20.</strong> Appendix</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="identifiers.html"><strong aria-hidden="true">20.1.</strong> Legal Identifiers</a></li><li class="chapter-item expanded "><a href="precedence.html"><strong aria-hidden="true">20.2.</strong> Operator Precedence</a></li></ol></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light (default)</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">Programming Flix</h1>

                    <div class="right-buttons">
                        <a href="print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                        <a href="https://github.com/flix/book/" title="Git repository" aria-label="Git repository">
                            <i id="git-repository-button" class="fa fa-github"></i>
                        </a>
                        <a href="https://github.com/flix/book/edit/master/src/build-and-packages.md" title="Suggest an edit" aria-label="Suggest an edit">
                            <i id="git-edit-button" class="fa fa-edit"></i>
                        </a>
                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>
                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script type="text/javascript">
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="build-and-package-management"><a class="header" href="#build-and-package-management">Build and Package Management</a></h1>
<p>Flix has a nascent build system and package manager.
The package manager does not yet support
<em>dependency resolution</em>, but the system is sufficient
to build and share packages.
There is no central package registry, so distribution
and versioning must be handled manually for the
moment.
We propose that the semantic version of a package is
included as part of its name, e.g. <code>foo-1.2.1.fpkg</code>.</p>
<p>The Flix build system makes it easy to create,
compile, run, and test a Flix project.</p>
<h2 id="overview"><a class="header" href="#overview">Overview</a></h2>
<p>The Flix build system supports the following commands:</p>
<div class="table-wrapper"><table><thead><tr><th style="text-align: center">Command</th><th style="text-align: center">Description</th></tr></thead><tbody>
<tr><td style="text-align: center"><code>init</code></td><td style="text-align: center">Creates a new project in the current directory.</td></tr>
<tr><td style="text-align: center"><code>check</code></td><td style="text-align: center">Checks the current project for errors.</td></tr>
<tr><td style="text-align: center"><code>build</code></td><td style="text-align: center">Builds (i.e. compiles) the current project.</td></tr>
<tr><td style="text-align: center"><code>build-jar</code></td><td style="text-align: center">Builds a jar-file from the current project.</td></tr>
<tr><td style="text-align: center"><code>build-pkg</code></td><td style="text-align: center">Builds a fpkg-file from the current project.</td></tr>
<tr><td style="text-align: center"><code>run</code></td><td style="text-align: center">Runs main for the current project.</td></tr>
<tr><td style="text-align: center"><code>test</code></td><td style="text-align: center">Runs tests for the current project.</td></tr>
</tbody></table>
</div>
<p>A command is executed by running <code>flix &lt;command&gt;</code> in
the project directory.
For example:</p>
<pre><code class="language-bash">$ java -jar path/to/flix.jar init
</code></pre>
<p>Build commands can also be invoked from within Visual
Studio Code by pressing <code>CTRL + SHIFT + P</code> (to bring
up the command palette) and typing the name of the
relevant command.
This is the recommended way to use the build system.</p>
<p><strong>Tip:</strong> To create a new project in Visual Studio
Code:</p>
<ol>
<li>create a new empty folder,</li>
<li>open the folder in Visual Studio Code
(<code>File -&gt; Open Folder...</code>), and</li>
<li>press <code>CTRL + SHIFT + P</code> and type <code>Flix init</code>.</li>
</ol>
<h2 id="creating-a-new-project"><a class="header" href="#creating-a-new-project">Creating a New Project</a></h2>
<p>We can create a new project by creating an empty
directory and running the <code>init</code> command inside it:</p>
<pre><code class="language-bash">$ mkdir myproject
$ cd myproject
$ java -jar path/to/flix.jar init
</code></pre>
<p>This will create a project structure with the
following layout (running <code>$ tree .</code> in the directory
will give the result below):</p>
<pre><code>.
├── build
├── flix.jar
├── HISTORY.md
├── lib
├── LICENSE.md
├── README.md
├── src
│   └── Main.flix
└── test
    └── TestMain.flix

4 directories, 6 files
</code></pre>
<p>The most relevant files are <code>src/Main.flix</code> and
<code>test/TestMain.flix</code>.</p>
<p>The <code>lib/</code> directory is intended to hold Flix package
files (<code>.fpkg</code>-files).
The build system and Visual Studio Code will
automatically detect Flix packages that are in the
<code>lib/</code> directory.</p>
<h2 id="checking-a-project"><a class="header" href="#checking-a-project">Checking a Project</a></h2>
<p>We can check a project for errors by running the
<code>check</code> command inside the project directory:</p>
<pre><code class="language-bash">$ java -jar path/to/flix.jar check
</code></pre>
<p>Checking a project is equivalent to building a
project, except no code is generated and the
process is significantly faster than a complete build.</p>
<h2 id="building-a-project"><a class="header" href="#building-a-project">Building a Project</a></h2>
<p>We can build a project by running the <code>build</code> command
inside the project directory:</p>
<pre><code class="language-bash">$ java -jar path/to/flix.jar build
</code></pre>
<p>Building a project populates the <code>build</code> directory
with class files.</p>
<blockquote>
<p><strong>Design Note</strong></p>
<p>There is no <code>clean</code> command, but deleting everything
inside the <code>build</code> directory serves the same purpose.</p>
</blockquote>
<h2 id="building-a-jar-file"><a class="header" href="#building-a-jar-file">Building a JAR-file</a></h2>
<p>We can compile a project to a JAR-file with the
<code>build-jar</code> command:</p>
<pre><code class="language-bash">$ java -jar path/to/flix.jar build-jar
</code></pre>
<p>which will produce a <code>myproject.jar</code> ready to run:</p>
<pre><code class="language-bash">$ java -jar myproject.jar
</code></pre>
<p>The JAR-file contains all class files from the
<code>build/</code> directory.</p>
<blockquote>
<p><strong>Warning</strong></p>
<p>The project must have been built beforehand with the
<code>build</code> command.</p>
</blockquote>
<blockquote>
<p><strong>Design Note</strong></p>
<p>At the time of writing (July 2021), the built
JAR-file still depends on the <code>flix.jar</code> file.
Thus to run a Flix program you must put both the
generated JAR-file and <code>flix.jar</code> on the class path.
For example, on Windows, the command would be:
<code>java -jar &quot;flix.jar;myproject.jar&quot; Main</code>.
In the future, the plan is to make the generated
JAR-file fully self-contained.</p>
</blockquote>
<h2 id="building-a-flix-project-file-fpkg"><a class="header" href="#building-a-flix-project-file-fpkg">Building a Flix Project File (fpkg)</a></h2>
<p>We can compile a project to a Flix package file
(fpkg) with the <code>build-pkg</code> command:</p>
<pre><code class="language-bash">$ java -jar path/to/flix.jar build-pkg
</code></pre>
<p>which will produce a <code>myproject.fpkg</code> package.</p>
<p>A Flix package file is essentially a zip-file of the
project source code.
A Flix package file can be reused in another project
by placing it into the <code>lib/</code> directory.</p>
<p>It is recommended to include the semantic version in
the filename of the package, e.g. <code>foo-1.2.1.fpkg</code>.</p>
<blockquote>
<p><strong>Design Note</strong></p>
<p>Flix does not compile to an intermediate format, but
instead relies on packages to contain source code.
This means that Flix does not lose any information
about a package and can perform cross-package
optimizations.</p>
</blockquote>
<h2 id="running-a-project"><a class="header" href="#running-a-project">Running a Project</a></h2>
<p>We do not have to build a JAR-file to run a project,
we can simply use the <code>run</code> command:</p>
<pre><code class="language-bash">$ java -jar path/to/flix.jar run
</code></pre>
<p>which will compile and run the main entry point.</p>
<h2 id="testing-a-project"><a class="header" href="#testing-a-project">Testing a Project</a></h2>
<p>We can use the <code>test</code> command to run all test cases
in a project:</p>
<pre><code class="language-bash">$ java -jar path/to/flix.jar test
</code></pre>
<p>Flix will collect all functions marked with <code>@test</code>,
execute them, and print a summary of the results:</p>
<pre><code>-- Tests -------------------------------------------------- root
✓ testMain01
</code></pre>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="vscode.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>
                            <a rel="next" href="test-framework.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>
                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="vscode.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>
                    <a rel="next" href="test-framework.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>

        <script type="text/javascript">
            window.playground_copyable = true;
        </script>
        <script src="elasticlunr.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="mark.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="searcher.js" type="text/javascript" charset="utf-8"></script>
        <script src="clipboard.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="highlight.js" type="text/javascript" charset="utf-8"></script>
        <script src="book.js" type="text/javascript" charset="utf-8"></script>

        <!-- Custom JS scripts -->
    </body>
</html>
